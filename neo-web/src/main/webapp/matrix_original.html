<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <title>jQuery UI Matrix Widget</title>
        <link class="jsbin" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.13/themes/base/jquery-ui.css" rel="stylesheet" type="text/css">
        <link class="jsbin" href="http://www.vitaligraf.de/jQuery/css/jquery.ui.matrix.css" rel="stylesheet" type="text/css">
        <script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.js"></script>
        <script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.13/jquery-ui.js"></script>
        <script class="jsbin" src="http://www.vitaligraf.de/jQuery/js/jquery.ui.matrix.js"></script>
    </head>
    <body>
        link http://jsbin.com/uwisa3/34
        

        <button id="mb" onclick="toggleMatrix()">show Matrix</button> (with random assignment of user to the groups)
        <div id="test"></div>

    </body>
    <script type="text/javascript">

        function toggleMatrix() {
            var matrix = $('#test .ui-matrix');
            if (matrix.length) {
                $('#test').matrix('destroy');
                $('#mb').text('show Matrix');
            } else {
                $('#test').matrix({
                    title: "groups & users",
                    cols: {0: "root", 1000: "vitali", 2000: "guest"},
                    rows: {100: "admins", 200: "users", 300: "guests"},
                    //rtl:true,
                    fillCell: function(col, row) {
                        el = $('<input \/>').attr({
                            type: 'checkbox',
                            userid: col,
                            groupid: row
                        }).click(function() {
                            userid = $(this).attr('userid');
                            groupid = $(this).attr('groupid');
                            if ($(this).attr('checked')) {
                                alert('insert user (' + userid + ') into group (' + groupid + ')');
                            } else {
                                alert('remove user (' + userid + ') from group (' + groupid + ')');
                            }
                        });
                        if (Math.random() >= 0.5) {
                            el.attr('checked', true);
                        }
                        return el;
                    }
                });
                $('#mb').text('destroy Matrix');
            }
        }
    </script>

</html>
